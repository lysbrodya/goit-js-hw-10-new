{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.params = {\n  key: '35983466-b93c787dc13242734c56ed506',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  per_page: 8,\n  safesearch: true,\n};\n\nexport default async function fetchData(searchQuery, page) {\n  axios.defaults.params.q = searchQuery;\n  axios.defaults.params.page = page;\n  const response = await axios.get();\n  return response.data;\n}\n","export function renderGallery(hits, galleryRef) {\n  const markup = hits.map(hit => {\n    return `\n        <li class=\"photo-card\">\n        <a href=\"${hit.largeImageURL}\">\n        <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"stats\">\n          <p class=\"stats-item\">\n            <i class=\"material-icons\">likes</i>\n            ${hit.likes}    \n            </p>\n          <p class=\"stats-item\">\n            <i class=\"material-icons\">views</i>\n            ${hit.views}    \n            </p>\n                      <p class=\"stats-item\">\n            <i class=\"material-icons\">comments</i>\n            ${hit.comments}    \n            </p>\n                      <p class=\"stats-item\">\n            <i class=\"material-icons\">downloads</i>\n            ${hit.downloads}    \n            </p>\n        </div>\n        </li>\n        `;\n  });\n  galleryRef.insertAdjacentHTML('beforeend', markup.join(''));\n}\n\nexport function clearGallery(gallery) {\n  gallery.innerHTML = '';\n}\n\n// export function onLoadMore() {\n\n// }\n","import fetchData from './js/pixabay-api.js';\nimport { renderGallery, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  searchBtn: document.querySelector('.btn-primary'),\n  onLoadMore: document.querySelector('.btn-load-more'),\n  loaderEl: document.querySelector('.loader-span'),\n};\n\nlet page = 1;\nrefs.onLoadMore.classList.add('is-hidden');\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.onLoadMore.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  const form = refs.searchForm;\n  const input = form.elements.query;\n  if (input.value === '') {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n  }\n  refs.searchBtn.disabled = true;\n  refs.loaderEl.classList.add('loader');\n  clearGallery(refs.gallery);\n  refs.onLoadMore.classList.remove('is-hidden');\n\n  fetchGallery(input.value, page);\n}\n\nfunction onLoadMore() {\n  const form = refs.searchForm;\n  const input = form.elements.query;\n  refs.loaderEl.classList.add('loader');\n\n  fetchGallery(input.value, page);\n}\n\nasync function fetchGallery(searchQuery, page) {\n  try {\n    const data = await fetchData(searchQuery, page);\n    renderGallery(data.hits, refs.gallery);\n    page += 1;\n    refs.loaderEl.classList.remove('loader');\n    new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 500,\n    });\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  } finally {\n    refs.searchBtn.disabled = false;\n  }\n}\n"],"names":["axios","fetchData","searchQuery","page","renderGallery","hits","galleryRef","markup","hit","clearGallery","gallery","refs","onSearch","onLoadMore","e","input","iziToast","fetchGallery","data","SimpleLightbox"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,2BACzBA,EAAM,SAAS,OAAS,CACtB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,SAAU,EACV,WAAY,EACd,EAEe,eAAeC,EAAUC,EAAaC,EAAM,CACzD,OAAAH,EAAM,SAAS,OAAO,EAAIE,EAC1BF,EAAM,SAAS,OAAO,KAAOG,GACZ,MAAMH,EAAM,OACb,IAClB,CChBO,SAASI,EAAcC,EAAMC,EAAY,CAC9C,MAAMC,EAASF,EAAK,IAAIG,GACf;AAAA;AAAA,mBAEQA,EAAI,aAAa;AAAA,oBAChBA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,cAKxCA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,cAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,cAITA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,cAIZA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,SAKxB,EACDF,EAAW,mBAAmB,YAAaC,EAAO,KAAK,EAAE,CAAC,CAC5D,CAEO,SAASE,EAAaC,EAAS,CACpCA,EAAQ,UAAY,EACtB,CC1BA,MAAMC,EAAO,CACX,WAAY,SAAS,cAAc,cAAc,EACjD,QAAS,SAAS,cAAc,UAAU,EAC1C,UAAW,SAAS,cAAc,cAAc,EAChD,WAAY,SAAS,cAAc,gBAAgB,EACnD,SAAU,SAAS,cAAc,cAAc,CACjD,EAEA,IAAIR,EAAO,EACXQ,EAAK,WAAW,UAAU,IAAI,WAAW,EACzCA,EAAK,WAAW,iBAAiB,SAAUC,CAAQ,EACnDD,EAAK,WAAW,iBAAiB,QAASE,CAAU,EAEpD,SAASD,EAASE,EAAG,CACnBA,EAAE,eAAc,EAGhB,MAAMC,EADOJ,EAAK,WACC,SAAS,MAC5B,GAAII,EAAM,QAAU,GAAI,CACtBC,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACR,CAAK,EACD,MACD,CACDL,EAAK,UAAU,SAAW,GAC1BA,EAAK,SAAS,UAAU,IAAI,QAAQ,EACpCF,EAAaE,EAAK,OAAO,EACzBA,EAAK,WAAW,UAAU,OAAO,WAAW,EAE5CM,EAAaF,EAAM,MAAOZ,CAAI,CAChC,CAEA,SAASU,GAAa,CAEpB,MAAME,EADOJ,EAAK,WACC,SAAS,MAC5BA,EAAK,SAAS,UAAU,IAAI,QAAQ,EAEpCM,EAAaF,EAAM,MAAOZ,CAAI,CAChC,CAEA,eAAec,EAAaf,EAAaC,EAAM,CAC7C,GAAI,CACF,MAAMe,EAAO,MAAMjB,EAAUC,EAAaC,CAAI,EAC9CC,EAAcc,EAAK,KAAMP,EAAK,OAAO,EACrCR,GAAQ,EACRQ,EAAK,SAAS,UAAU,OAAO,QAAQ,EACvC,IAAIQ,EAAe,aAAc,CAC/B,aAAc,MACd,aAAc,GACpB,CAAK,CACF,MAAe,CACdH,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACR,CAAK,CACL,QAAY,CACRL,EAAK,UAAU,SAAW,EAC3B,CACH"}